---
title: 我对代码的理解
date: 2017-04-13 09:07:51
tags: 代码
---


转眼已经毕业快两年，从本科刚开始学C语言，到现在Java，object-c语言开发，中间接触过C#，python，jsp，jQuery，JavaScript，scala，C++，html，css，markdown等多种语言。在读研究生的时候，去日本的一家公司实习时，见识过规范的开发模式和优秀的架构，也在实验室的两年里维护了一堆漏洞百出的代码。学习过《clean code》和《重构》等关于代码质量的书，也阅读过阿里和谷歌的代码规范。阅读优秀的代码是一种享受，阅读烂代码是一种折磨。所以我想谈一谈自己对优秀的代码的一点理解。

## 1、 美观

代码整体外观应该是赏心悦目的。

打开编辑器，代码整体布局结构给人第一印象应该是赏心悦目的。这里的赏心悦目具体表现在代码行长度，空格，函数块的行数，及规范化的代码注释等。这些条件都处理好了，不论是什么语言，给人的感觉都应该是整齐，规范。现在编辑工具大都支持自动规范代码的功能，比如Visual studio和eclipse等，但是有的时候自动规范的代码并不一定美观，还需要自己去处理。


## 2、 易读

阅读代码，不看注释就能理解。

代码的易读性是代码的首要条件。代码就像是写文章，是给其他人看的。易读性的代码具体体现在函数的命名，参数的设置，函数命名可以加长，但是参数不易过多。Objective-C语言是个很好的例子，代码如下示意：

```object

//根据姓名和性别创建一个人
- (void)createPerson:(NSString *) name withSex:(NSString *)sex;

```

读这种代码像读阅读文章一样，很清晰的能够明白当前的函数块要做的什么事。

## 3、 简洁

代码体验的是一个人的解决方案，应该最直接，效率最高！

代码的简洁性是最体验程序员内功的地方，包括对所用语言的理解，框架API的使用及算法的设计等等。现在很多面向对象语言都开始引入函数式编程思想，C#在3.5的时候好像就已经引入linq查询，java在java8的版本引入stream，了解这些特性能够简化代码的编写。但是最重要的还是编程思维的问题，见过很多次类似`if(true) return true; else return false`的代码，像这种情况就很无语了。

## 4、 健壮

代码是能接受考验的！

安全的代码，是在运行的过程中不会出现内存泄漏，崩溃，抛出非预见性异常等情况的。保证健壮性的代码的形式有很多种，最常见也最有效的就是添加单元测试，虽然会额外的增加工作量，但是收益还是挺大。另外一种也可以采取同行评审，但是在同时间大量代码的情况下，这种审核的效果不是很好。所以，最好在开发的过程中就要安全性保护的概念。

在编写函数块的时候：

 要对入参进行判断；
2. 在调用其他函数的时候，要明确该函数可能返回的数据；
3. 要对可能出现的异常进行处理，可以catch，可以抛出；
3. 明确返回值能否传回null。
……

写出健壮的代码的措施有很多，很多时候出现bug就是因为考虑不够细致，没有处理全面。

## 5、 设计

在工作的过程中，很多人都是一接到任务就动手开始写，花费大量的时间写完后，发现有很多地方明明可以做的更好，但是由于deadline的原因，只好不了了之，日积月累就成了破窗。所以，在接到新的任务或需求的时候，可以留一点时间进行一下规划设计：

1. 画一下uml类图，研究一下类与类之间的关系，简单的设计一下数据模型。
2. 根据当前的数据模型，采用何时的数据结构。
2. 简单的画一下流程图，可以让同事帮忙看一下是否有遗漏
3. 判断一下当前的需求符合某种模型，是否有何时设计模式可以采用
4. 研究某一块的逻辑处理，是否有适用的成熟算法

“磨刀不误砍柴工”，做规划设计并不会耽误太多时间，但是，会让你对整个流程非常清晰，

## 6、 总结

好的代码并不是一蹴而就的，往往称为最佳实践的代码是经过多次评审、重构，不断的进行改善优化，才能成为优秀的代码。写代码容易，写出好代码难。写代码不是简单的码代码块，需要有敬畏之心，知道自己的代码会有改进的地方，才能不断的去学习，进步。


